<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Woofalytics - Bark Detection</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üêï</text></svg>">
</head>
<body>
    <!-- NASA Mission Control Telemetry Strip -->
    <div class="telemetry-strip" id="telemetry-strip">
        <div class="telemetry-mission">
            <span class="mission-badge">WOOFALYTICS</span>
            <span class="mission-callsign">MISSION CONTROL</span>
        </div>
        <div class="telemetry-clock">
            <span class="clock-label">T+</span>
            <span class="clock-value" id="mission-clock">00:00:00.00</span>
        </div>
        <div class="telemetry-status">
            <div class="status-led" id="led-ws" data-label="WS">
                <span class="led"></span>
                <span class="led-label">WS</span>
            </div>
            <div class="status-led" id="led-mic" data-label="MIC">
                <span class="led"></span>
                <span class="led-label">MIC</span>
            </div>
            <div class="status-led" id="led-bark" data-label="BARK">
                <span class="led"></span>
                <span class="led-label">BARK</span>
            </div>
        </div>
        <div class="telemetry-coordinates">
            <span class="coord-label">LAT</span>
            <span class="coord-value" id="coord-lat">+00.0000</span>
            <span class="coord-label">LON</span>
            <span class="coord-value" id="coord-lon">-000.0000</span>
        </div>
    </div>

    <div class="app">
        <header class="header">
            <div class="brand">
                <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/>
                    <circle cx="8" cy="10" r="1.5" fill="currentColor"/>
                    <circle cx="16" cy="10" r="1.5" fill="currentColor"/>
                    <path d="M9 16c.85.63 1.885 1 3 1s2.15-.37 3-1"/>
                </svg>
                <h1>Woofalytics</h1>
            </div>
            <div class="status-badge" id="status">
                <span class="status-dot"></span>
                <span class="status-text">Connecting...</span>
            </div>
        </header>

        <main class="dashboard">
            <!-- Primary Row: Bark Detection -->
            <section class="panel panel-bark" id="bark-panel">
                <!-- Particle explosion canvas overlay -->
                <canvas id="particle-canvas" class="particle-canvas"></canvas>
                <div class="bark-gauge">
                    <svg class="gauge-ring" viewBox="0 0 120 120">
                        <circle class="gauge-bg" cx="60" cy="60" r="54" />
                        <circle class="gauge-fill" id="gauge-fill" cx="60" cy="60" r="54" />
                    </svg>
                    <div class="gauge-center">
                        <span class="gauge-value" id="probability-value">0</span>
                        <span class="gauge-unit">%</span>
                    </div>
                </div>
                <div class="bark-info">
                    <div class="bark-label">Bark Probability</div>
                    <div class="bark-status" id="bark-status">
                        <span class="status-icon" id="bark-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M11 5L6 9H2v6h4l5 4V5z"/>
                                <line x1="23" y1="9" x2="17" y2="15"/>
                                <line x1="17" y1="9" x2="23" y2="15"/>
                            </svg>
                        </span>
                        <span class="status-label" id="bark-text">Monitoring</span>
                    </div>
                </div>
            </section>

            <!-- Direction Compass -->
            <section class="panel panel-direction">
                <h2 class="panel-title">Direction</h2>
                <div class="compass">
                    <div class="compass-track">
                        <div class="compass-markers">
                            <span class="marker marker-left">L</span>
                            <span class="marker marker-center">Front</span>
                            <span class="marker marker-right">R</span>
                        </div>
                        <div class="compass-needle" id="doa-needle">
                            <div class="needle-head"></div>
                        </div>
                    </div>
                    <div class="compass-value" id="doa-value">--</div>
                </div>
            </section>

            <!-- Audio Level -->
            <section class="panel panel-audio">
                <h2 class="panel-title">Audio Level</h2>
                <div class="vu-meter">
                    <div class="vu-track">
                        <div class="vu-segments">
                            <span></span><span></span><span></span><span></span><span></span>
                            <span></span><span></span><span></span><span></span><span></span>
                            <span></span><span></span><span></span><span></span><span></span>
                            <span></span><span></span><span></span><span></span><span></span>
                        </div>
                        <div class="vu-fill" id="audio-level"></div>
                        <div class="vu-peak" id="audio-peak"></div>
                    </div>
                    <div class="vu-labels">
                        <span>-40</span>
                        <span>-20</span>
                        <span>-10</span>
                        <span>0 dB</span>
                    </div>
                </div>
                <!-- Waveform Visualizer Canvas -->
                <div class="waveform-container">
                    <canvas id="waveform-canvas" class="waveform-canvas"></canvas>
                    <div class="waveform-overlay">
                        <span class="waveform-label">WAVEFORM</span>
                    </div>
                </div>
            </section>

            <!-- Statistics Strip -->
            <section class="panel panel-stats">
                <div class="stat-item">
                    <span class="stat-value" id="total-barks">0</span>
                    <span class="stat-label">Barks</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-value" id="uptime">0:00</span>
                    <span class="stat-label">Uptime</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item">
                    <span class="stat-value" id="evidence-count">0</span>
                    <span class="stat-label">Recordings</span>
                </div>
                <div class="stat-divider"></div>
                <div class="stat-item stat-mic">
                    <span class="stat-value" id="microphone">--</span>
                    <span class="stat-label">Microphone</span>
                </div>
            </section>

            <!-- Recent Events -->
            <section class="panel panel-events">
                <div class="panel-header">
                    <h2 class="panel-title">Recent Activity</h2>
                    <span class="event-count" id="event-count">0 events</span>
                </div>
                <div class="events-list" id="events-list">
                    <div class="events-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 6v6l4 2"/>
                        </svg>
                        <span>Waiting for events...</span>
                    </div>
                </div>
            </section>

            <!-- Evidence Recordings -->
            <section class="panel panel-evidence">
                <div class="panel-header">
                    <h2 class="panel-title">Evidence Recordings</h2>
                    <button class="btn-icon" onclick="loadEvidence()" title="Refresh">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M23 4v6h-6"/>
                            <path d="M1 20v-6h6"/>
                            <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                        </svg>
                    </button>
                </div>
                <div class="evidence-list" id="evidence-list">
                    <div class="evidence-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <path d="M14 2v6h6"/>
                            <path d="M12 18v-6"/>
                            <path d="M9 15l3 3 3-3"/>
                        </svg>
                        <span>No recordings yet</span>
                    </div>
                </div>
            </section>

            <!-- Known Dogs Panel -->
            <section class="panel panel-dogs">
                <div class="panel-header">
                    <h2 class="panel-title">Known Dogs</h2>
                    <a href="/dogs.html" class="btn-icon" title="Manage Dogs">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 20h9"/>
                            <path d="M16.5 3.5a2.12 2.12 0 013 3L7 19l-4 1 1-4L16.5 3.5z"/>
                        </svg>
                    </a>
                </div>
                <div class="dogs-list" id="dogs-list">
                    <div class="dogs-empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                            <line x1="9" y1="9" x2="9.01" y2="9"/>
                            <line x1="15" y1="9" x2="15.01" y2="9"/>
                        </svg>
                        <span>No dogs registered</span>
                        <a href="/dogs.html" class="btn-sm btn-primary">Add a Dog</a>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <span>Woofalytics v2.0.0</span>
            <span class="footer-divider">¬∑</span>
            <a href="/dogs.html">Manage Dogs</a>
            <span class="footer-divider">¬∑</span>
            <a href="/api/docs">API Documentation</a>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
